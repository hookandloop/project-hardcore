
<div class="row">
  <div class="twelve columns">
    <div id="datagrid">
    </div>
  </div>
</div>


<script>
  $('body').one('initialized', function () {

      var grid,
        columns = [],
        data = [];

      //Define Columns for the Grid.
      columns.push({ id: 'id', name: 'Customer Id', field: 'id'});
      columns.push({ id: 'location', name: 'Location', field: 'location', formatter: Formatters.Hyperlink});
      columns.push({ id: 'firstname', name: 'First Name', field: 'firstname'});
      columns.push({ id: 'lastname', name: 'Last Name', field: 'lastname'});
      columns.push({ id: 'phone', name: 'Phone', field: 'phone'});
      columns.push({ id: 'purchases', name: 'Purchases', field: 'purchases'});

      //Get some data via ajax
      var url = '{{basepath}}api/accounts';

      $.getJSON(url, function(res) {

        $('#datagrid').datagrid({
          columns: columns,
          dataset: res,
          groupable: {
            fields: ['type'],
            aggregator: 'sum', //sum, averge, max ect
            aggregate: 'purchases',
            groupFooterRow: true,
            groupFooterRowFormatter: function (idx, row, cell, value, col, item, api) {
              return '<td role="gridcell" colspan=' + (idx-1) + ' style="border-right: 0"><div class="datagrid-cell-wrapper">&nbsp;</div></td><td role="gridcell" style="border-right: 0"><div class="datagrid-cell-wrapper"> <b style="float: right;">Total</b> </div></td><td role="gridcell"><div class="datagrid-cell-wrapper"> '+ item.sum +'</div></td>';
            },
            expanded: function (row, cell, value, col, item) {
              //Similate some logic to determin which rows should be Collapsed
              return item.type.indexOf('Customer') != -1;
            }
          },
          toolbar: {title: 'Accounts', results: true, personalize: true, actions: true, rowHeight: true, keywordFilter: false}
        });
      });
 });

</script>
